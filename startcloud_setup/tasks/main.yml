---
-
  name: "Setting timezone to {{ timezone }}"
  community.general.timezone:
    name: "{{ timezone }}"

-
  name: "Creating Directories"
  ansible.builtin.file:
    path: "{{ item }}"
    state: directory
    mode: 0777
  with_items:
    - "{{ completed_dir }}"
    - "/root/.ansible/tmp"
    - "/vagrant/support-bundle"

-
  name: "Writing current variables to /vagrant/support-bundle/ansible-system-variables.json"
  ansible.builtin.copy:
    content: "{{ vars }}"
    dest: "/vagrant/support-bundle/ansible-system-variables.json"
    force: false
    mode: 'a+x'

-
  name: "Printing out core_provisioner version used"
  ansible.builtin.debug:
    msg: "This Ansible Playbook was Generated with core_provisioner v{{ core_provisioner_version }}"

-
  name: "Writing current variables to /vagrant/support-bundle/version.json"
  ansible.builtin.copy:
    content: "{{ core_provisioner_version }}"
    dest: "/vagrant/support-bundle/version.json"
    force: false
    mode: 'a+x'
